!function(t,e){"function"==typeof define&&define.amd?define(["leaflet"],t):"object"==typeof exports&&(module.exports=t(require("leaflet"))),void 0!==e&&e.L&&t(L)}(function(t){class e{constructor(t,e,i){this._control=t,this._container=e,this._legend=i,this._width=this._control.options.symbolWidth,this._height=this._control.options.symbolHeight}}class i extends e{constructor(t,e,i){super(t,e,i),this._canvas=this._buildCanvas(),this._drawSymbol&&this._drawSymbol(),this._style()}_buildCanvas(){var e=t.DomUtil.create("canvas",null,this._container);return e.height=this._control.options.symbolHeight,e.width=this._control.options.symbolWidth,e}_drawSymbol(){}_style(){var t=this._ctx=this._canvas.getContext("2d");(this._legend.fill||this._legend.fillColor)&&(t.globalAlpha=this._legend.fillOpacity||1,t.fillStyle=this._legend.fillColor||this._legend.color,t.fill(this._legend.fillRule||"evenodd")),(this._legend.stroke||this._legend.color)&&(this._legend.dashArray&&t.setLineDash(this._legend.dashArray||[]),t.globalAlpha=this._legend.opacity||1,t.lineWidth=this._legend.weight||2,t.strokeStyle=this._legend.color||"#3388ff",t.lineCap=this._legend.lineCap||"round",t.lineJoin=this._legend.lineJoin||"round",t.stroke())}rescale(){}center(){}}class s extends i{_drawSymbol(){var t=this._ctx=this._canvas.getContext("2d"),e=this._legend,i=e.weight||3,s=this._control.options.symbolWidth/2,l=this._control.options.symbolHeight/2,n=Math.min(s,l)-i,o=n;e.radius&&(o=Math.min(e.radius,n)),t.arc(s,l,o,0,2*Math.PI,!1)}}class l extends i{_drawSymbol(){var t=this._ctx=this._canvas.getContext("2d"),e=this._control.options.symbolWidth,i=this._control.options.symbolHeight/2;t.beginPath(),t.moveTo(0,i),t.lineTo(e,i)}}class n extends i{_drawSymbol(){var t=this._ctx=this._canvas.getContext("2d"),e=this._legend.weight||3,i=this._control.options.symbolWidth/2,s=this._control.options.symbolHeight/2,l=i-e,n=s-e;l==n&&(n/=2),t.rect(i-l,s-n,2*l,2*n)}}class o extends i{_drawSymbol(){var t=this._ctx=this._canvas.getContext("2d"),e=this._legend.weight||3,i=this._control.options.symbolWidth/2,s=this._control.options.symbolHeight/2,l=Math.min(i,s)-e,n=360/this._legend.sides;t.beginPath();for(var o=0;o<=this._legend.sides;o++){var h=i+l*Math.cos((n*o+(90-n/2))*Math.PI/180),a=s+l*Math.sin((n*o+(90-n/2))*Math.PI/180);0==o?t.moveTo(h,a):t.lineTo(h,a)}}}class h extends e{constructor(t,e,i){super(t,e,i),this._img=null,this._loadImages()}_loadImages(){var e=t.DomUtil.create("img",null,this._container);this._img=e,e.onload=(()=>{this.rescale()}),e.src=this._legend.url}rescale(){if(this._img){var t=this._control.options;if(this._img.width>t.symbolWidth||this._img.height>t.symbolHeight){var e=this._img.width,i=this._img.height,s=t.symbolWidth/e,l=t.symbolHeight/i,n=Math.min(s,l);this._img.width=e*n,this._img.height=i*n}this.center()}}center(){var t=this._container.offsetWidth/2,e=this._container.offsetHeight/2,i=t-parseInt(this._img.width)/2,s=e-parseInt(this._img.height)/2;this._img.style.left=i.toString()+"px",this._img.style.top=s.toString()+"px"}}t.Control.Legend=t.Control.extend({options:{position:"topleft",title:"LÃ©gende",legends:[],symbolWidth:24,symbolHeight:24,opacity:1,column:1,collapsed:!1},initialize:function(e){t.Util.setOptions(this,e),this._legendSymbols=[],this._buildContainer()},onAdd:function(t){return this._map=t,this._initLayout(),this._container},_buildContainer:function(){this._container=t.DomUtil.create("div","leaflet-legend leaflet-bar leaflet-control"),this._container.style.backgroundColor="rgba(255,255,255, "+this.options.opacity+")",this._contents=t.DomUtil.create("section","leaflet-legend-contents",this._container),this._link=t.DomUtil.create("a","leaflet-legend-toggle",this._container),this._link.title="Legend",this._link.href="#",t.DomUtil.create("h3","leaflet-legend-title",this._contents).innerText=this.options.title||"Legend";for(var e=this.options.legends.length,i=Math.ceil(e/this.options.column),s=this._contents,l=0;l<e;l++){l%i==0&&(s=t.DomUtil.create("div","leaflet-legend-column",this._contents));var n=this.options.legends[l];this._buildLegendItems(s,n)}},_buildLegendItems:function(e,i){var a=t.DomUtil.create("div","leaflet-legend-item",e);i.inactive&&t.DomUtil.addClass(a,"leaflet-legend-item-inactive");var r,d=t.DomUtil.create("i",null,a);if("image"===i.type)r=new h(this,d,i);else if("circle"===i.type)r=new s(this,d,i);else if("rectangle"===i.type)r=new n(this,d,i);else if("polygon"===i.type)r=new o(this,d,i);else{if("polyline"!==i.type)return void t.DomUtil.remove(a);r=new l(this,d,i)}this._legendSymbols.push(r),d.style.width=this.options.symbolWidth+"px",d.style.height=this.options.symbolHeight+"px",t.DomUtil.create("span",null,a).innerText=i.label,i.layers&&(t.DomUtil.addClass(a,"leaflet-legend-item-clickable"),t.DomEvent.on(a,"click",function(){this._toggleLegend.call(this,a,i.layers)},this))},_initLayout:function(){t.DomEvent.disableClickPropagation(this._container),t.DomEvent.disableScrollPropagation(this._container),this.options.collapsed?(this._map.on("click",this.collapse,this),t.DomEvent.on(this._container,{mouseenter:this.expand,mouseleave:this.collapse},this)):this.expand()},_toggleLegend:function(e,i){if(t.DomUtil.hasClass(e,"leaflet-legend-item-inactive"))if(t.DomUtil.removeClass(e,"leaflet-legend-item-inactive"),t.Util.isArray(i))for(var s=0,l=i.length;s<l;s++)this._map.addLayer(i[s]);else this._map.addLayer(i);else if(t.DomUtil.addClass(e,"leaflet-legend-item-inactive"),t.Util.isArray(i))for(s=0,l=i.length;s<l;s++)this._map.removeLayer(i[s]);else this._map.removeLayer(i)},expand:function(){for(var e of(this._link.style.display="none",t.DomUtil.addClass(this._container,"leaflet-legend-expanded"),this._legendSymbols))e.rescale();return this},collapse:function(){return this._link.style.display="block",t.DomUtil.removeClass(this._container,"leaflet-legend-expanded"),this},redraw:function(){t.DomUtil.empty(this._contents),this._buildLegendItems()}}),t.control.legend=t.control.Legend=function(e){return new t.Control.Legend(e)}},window);